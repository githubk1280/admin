<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tmrasys.dao.ProjectDao">
	<select id="loadProjectById" resultMap="employeeMapper"
		parameterType="int">
		SELECT * FROM project
		WHERE
		project_id=#{id}
	</select>
	
	<select id="loadProjectsByEmployee" resultType="list" resultMap="employeeMapper" parameterType="int">
		SELECT * FROM PROJECT P
		INNER JOIN PROJECT_EMPLOYEE PE ON P.PROJECT_ID = PE.PROJECT_ID 
		INNER JOIN EMPLOYEE E ON E.EMPLOYEE_ID = PE.EMPLOYEE_ID AND E.EMPLOYEE_ID = #{employeeId}
	</select>
	
	<resultMap type="com.tmrasys.domain.Project" id="employeeMapper">
		<id property="projectId" column="PROJECT_ID"/>
		<result property="projectName" column="PROJECT_NAME"/>
		<result property="priority" column="PRIORITY"/>
		<result property="startDate" column="START_DATE"/>
		<result property="endDate" column="END_DATE"/>
		<result property="needPrincipalAssist" column="NEED_PRINCPAL_ASSIST"/>
		<result property="projectContent" column="PROJECT_CONTENT"/>
		<result property="potentialExpenditure" column="POTENTIAL_EXPENDITURE"/>
		<result property="sampleCount" column="SAMPLE_COUNT"/>
		<result property="researchDirection" column="RESEARCH_DIRECTION"/>
		<result property="platformDemand" column="TECHNOLOGY_PLATFORM_DEMAND"/>
		<result property="hasCorporatedIntention" column="HAS_CORPORATED_INTENTION"/>
		<result property="needProjectPlan" column="NEED_PROJECT_PLAN"/>
		<result property="needSCI" column="NEED_SCI"/>
		<result property="projectNote" column="PROJECT_NOTE"/>
	</resultMap>

</mapper>

